<style>
blockquote {
    counter-increment: quote-counter;
    margin: 25px auto;
    quotes: "“" "”" "‘" "’";
    padding: 1rem 1.5rem 1rem 2.5rem;
    color: #555555;
    padding: 1rem 1.5rem;
    border-left: 0.2rem solid #0077b8;
    position: relative;
    background: var(--haze);
}
blockquote::before {
    content: counter(quote-counter) ".";
    position: absolute;
    top: 0.5rem;
    left: -2rem;
    font-weight: bold;
    color: #0077b8;
}
blockquote .author {
    display: block;
    margin-top: 0.5rem;
    text-align: right;
    font-weight: bold;
    font-style: normal;
    color: #333333;
}
   

/* fade-in 动画 */
.fade-in {
    opacity: 0;
    transform: translateY(20px);
}
.fade-in.visible {
    opacity: 1;
    transform: translateY(0);
}
</style>

{{ $author := .Get "author" | default "" }}
{{ $id := .Get "id" | default (printf "quote-%d" (add (len (.Page.Scratch.Get "quote-anchors" | default (slice))) 1)) }}
{{ $preview := .Inner | markdownify | plainify | truncate 50 }}

{{ .Page.Scratch.Add "quote-anchors" (dict "id" $id "author" $author "preview" $preview) }}

{{ $border := .Get "border" }}
{{ $color := .Get "color" }}
{{ $bg := .Get "bg" }}

<blockquote id="{{ $id }}" 
  {{ if or $border $color $bg }}
    style="
      {{ with $border }}border-left-color: {{ . }};{{ end }}
      {{ with $color }}color: {{ . }};{{ end }}
      {{ with $bg }}background: {{ . }};{{ end }}
    "
  {{ end }}
>
  {{ .Inner | markdownify }}
  {{- if .Get "author" -}}
    <span class="author">— {{ .Get "author" }}</span>
  {{- end -}}
</blockquote>

